BEGIN TRANSACTION;
CREATE TABLE IF NOT EXISTS `ThucDon` (
	`MaMon`	INTEGER PRIMARY KEY AUTOINCREMENT,
	`TenMon`	NVARCHAR ( 50 ) NOT NULL,
	`Gia`	INT NOT NULL,
	`AnhMon`	CHAR ( 100 ),
	`MaLoai`	INT NOT NULL,
	CONSTRAINT `FK_Loai` FOREIGN KEY(`MaLoai`) REFERENCES `Loai`(`MaLoai`)
);
CREATE TABLE IF NOT EXISTS `TamTinh` (
	`MaMon`	INTEGER NOT NULL,
	`MaHD`	INTEGER NOT NULL,
	`SoLuong`	INT NOT NULL,
	`DonGia`	INT NOT NULL,
	CONSTRAINT `FK_HD` FOREIGN KEY(`MaHD`) REFERENCES `HoaDon`(`MaHD`),
	CONSTRAINT `FK_Mon` FOREIGN KEY(`MaMon`) REFERENCES `ThucDon`(`MaMon`)
);
CREATE TABLE IF NOT EXISTS `TaiKhoan` (
	`TK`	CHAR ( 15 ),
	`MK`	CHAR ( 15 ) NOT NULL,
	`MaCV`	CHAR ( 5 ) NOT NULL,
	`MaNV`	INTEGER NOT NULL,
	CONSTRAINT `FK_CV` FOREIGN KEY(`MaCV`) REFERENCES `ChucVu`(`MaCV`),
	CONSTRAINT `FK_NV` FOREIGN KEY(`MaNV`) REFERENCES `NhanVien`(`MaNV`),
	PRIMARY KEY(`TK`)
);
CREATE TABLE IF NOT EXISTS `NhanVien` (
	`MaNV`	INTEGER PRIMARY KEY AUTOINCREMENT,
	`TenNV`	NVARCHAR ( 50 ) NOT NULL,
	`SDT`	CHAR ( 11 ),
	`NamSinh`	CHAR ( 10 ) NOT NULL
);
CREATE TABLE IF NOT EXISTS `Loai` (
	`MaLoai`	INTEGER PRIMARY KEY AUTOINCREMENT,
	`TenLoai`	NVARCHAR ( 50 ) NOT NULL
);
CREATE TABLE IF NOT EXISTS `HoaDon` (
	`MaHD`	INTEGER PRIMARY KEY AUTOINCREMENT,
	`MaBan`	INTEGER NOT NULL,
	`NgayLap`	CHAR ( 10 ) NOT NULL,
	`ThanhTien`	INT NOT NULL,
	CONSTRAINT `FK_SoBan` FOREIGN KEY(`MaBan`) REFERENCES `Ban`(`MaBan`)
);
CREATE TABLE IF NOT EXISTS `ChucVu` (
	`MaCV`	CHAR ( 5 ),
	`TenCV`	NVARCHAR ( 50 ) NOT NULL,
	PRIMARY KEY(`MaCV`)
);
CREATE TABLE IF NOT EXISTS `CaNV` (
	`MaCaNV`	INTEGER PRIMARY KEY AUTOINCREMENT,
	`MaCa`	INTEGER NOT NULL,
	`MaNV`	INTEGER NOT NULL,
	`NgayCaLam`	CHAR ( 10 ) NOT NULL,
	CONSTRAINT `FK_NVTongCa` FOREIGN KEY(`MaNV`) REFERENCES `NhanVien`(`MaNV`),
	CONSTRAINT `FK_CA` FOREIGN KEY(`MaCa`) REFERENCES `Ca`(`MaCV`)
);
CREATE TABLE IF NOT EXISTS `Ca` (
	`MaCa`	INTEGER PRIMARY KEY AUTOINCREMENT,
	`TenCa`	NVARCHAR ( 10 ) NOT NULL
);
CREATE TABLE IF NOT EXISTS `Ban` (
	`MaBan`	INTEGER PRIMARY KEY AUTOINCREMENT,
	`KhuVuc`	NVARCHAR ( 10 ) NOT NULL
);
COMMIT;
